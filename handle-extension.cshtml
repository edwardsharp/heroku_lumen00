@{
    Response.ContentType = "text/xml";
    
    var twiml = new Twilio.TwiML.TwilioResponse();

    //@start snippet
    int user_pushed = int.Parse(Request["Digits"]);
    //@end snippet
    
	if (user_pushed == 0)
	{
        twiml.Say("Taking you back to the main menu");
        twiml.Redirect("handle-incoming-call.xml", "GET");
	}
	else if (user_pushed == 1)
	{
        // @start snippet
        twiml.Say("Connecting you to agent 1. All calls are recorded.");
        twiml.Dial(
            new Twilio.TwiML.Number("+16093866516", new { url = "screen-caller.xml", method = "GET" }),
            new { record="true"});
        // @end snippet
	}	
	else if (user_pushed == 2)
	{
        twiml.Say("Connecting you to agent 2. All calls are recorded.");
        twiml.Dial(
            new Twilio.TwiML.Number("+1NNNNNNNNNN", new { url = "screen-caller.xml", method = "GET" }),
            new { record = "true" });
    }
	else
    {
        twiml.Say("Sorry, that extension is unknown.");
        twiml.Redirect("handle-user-input.cshtml?Digits=2", "GET");
	}
}
@Html.Raw(twiml.ToString())